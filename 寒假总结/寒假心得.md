# 寒假心得
## 特征点法、光流法、直接法
[关于特征点法、直接法、光流法slam的对比](https://blog.csdn.net/weixin_38203573/article/details/79787499)

特征点法

优点：
- 特征点本身对光照、运动、旋转比较不敏感，所以比较稳定
- 相机运动较快（相对直接法来说）也能跟踪成功，鲁棒性好一些

缺点：
- 关键点提取、描述子、匹配耗时长
- 特征点丢失场景无法使用
- 只能构建稀疏地图

[直接法](https://www.cnblogs.com/gaoxiang12/p/5689927.html)

优点：
- 可以省去计算特征点、描述子的时间。
- 只要求有像素梯度即可，无须特征点。因此，直接法可以在特征缺失的场合下使用。比较极端的例子是只有渐变的一张图像。它可能无法提取角点类特征，但可以用直接法估计它的运动。
- 可以构建半稠密乃至稠密的地图，这是特征点法无法做到的。

缺点：
- 非凸性——直接法完全依靠梯度搜索，降低目标函数来计算相机位姿。其目标函数中需要取像素点的灰度值，而图像是强烈非凸的函数。这使得优化算法容易进入极小，只在运动很小时直接法才能成功。
- 单个像素没有区分度。找一个和他像的实在太多了！——于是我们要么计算图像块，要么计算复杂的相关性。由于每个像素对改变相机运动的“意见”不一致。只能少数服从多数，以数量代替质量。
- **灰度值不变**是很强的假设。如果相机是自动曝光的，当它调整曝光参数时，会使得图像整体变亮或变暗。光照变化时亦会出现这种情况。特征点法对光照具有一定的容忍性，而直接法由于计算灰度间的差异，整体灰度变化会破坏灰度不变假设，使算法失败。

[光流法](https://blog.csdn.net/qq_41368247/article/details/82562165?utm_medium=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-2.control&depth_1-utm_source=distribute.pc_relevant.none-task-blog-BlogCommendFromMachineLearnPai2-2.control)

优点：
- 光流法的优点在于它无须了解场景的信息,就可以准确地检测识别运动日标位置,且在摄像机处于运动的情况下仍然适用。
- 光流不仅携带了运动物体的运动信息，而且还携带了有关景物三维结构的丰富信息，它能够在不知道场景的任何信息的情况下，检测出运动对象。

缺点：
光流法的适用条件，即两个基本假设，在现实情况下均不容易满足。
- 假设一：亮度恒定不变。
但是实际情况是光流场并不一定反映了目标的实际运动情况,如图,所示。图中,光源不动,而物体表面均一,且产生了自传运动,却并没有产生光流图中,物体并没有运动,但是光源与物体发生相对运动,却有光流产生。因此可以说光流法法对光线敏感, 光线变化极易影响识别效果。
- 假设二：小运动。
现实情况下较大距离的运动也是普遍存在的。因此当需要检测的目标运动速度过快是，传统光流法也不适用。

| |特征点法|直接法|光流法|
|:--|:--|:--|:--|
|基本概念|特征点法，根据提取、匹配特征点来估计相机运动，优化的是**重投影误差**，对光照变化不敏感，是比较成熟的方案。常见的开源方案，比如ORBSLAM|直接法，根据相机的亮度信息估计相机的运动，可以不需要计算关键点和描述子，优化的是**光度误差**，根据使用像素数量可分为稀疏、半稠密、稠密三种。常见开源方案有SVO, LSD-SLAM|光流法：基于灰度不变假设，把特征点法中的描述子和匹配换成了光流跟踪，如VINS前端|
|优点|（1）特征点本身对光照、运动、旋转比较不敏感，所以比较稳定（2）相机运动较快（相对直接法来说）也能跟踪成功，鲁棒性好一些|（1）速度快，可以省去计算特征点、描述子时间（2）可以用在特征缺失的场合（比如白墙），特征点法在该情况下会急速变差（3）可以构建半稠密乃至稠密地图|不需要计算描述子，不需要匹配特征点，节省了很多计算量。|
|缺点|（1）关键点提取、描述子、匹配耗时长（2）特征点丢失场景无法使用（3）只能构建稀疏地图|（1）因为假设了灰度不变，所以易受光照变化影响（2）要求相机运动较慢或采样频率较高（可以用图像金字塔改善）（3）单个像素或像素块区分度不强，采用的是数量代替质量的策略|（1）因为假设了灰度不变，所以易受光照变化影响（2）比较粗略的匹配，后面需要PNP，ICP方面的优化|


## BA(bundle adjustment)
[BA.cpp](BA.cpp)
[图优化](https://www.cnblogs.com/gaoxiang12/p/5244828.html)



## markdown小技巧
<details>
  <summary>md折叠区</summary>
  ```bash
  markdown 折叠方法
  ```
</details>

<p align="right">向右对齐</p>
